{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MacoT\\\\OneDrive\\\\Documents\\\\GitHub\\\\BeOurGuest-Homeworks\\\\Homework 3\\\\client\\\\src\\\\components\\\\Map.jsx\";\nimport React, { Component, useEffect } from 'react';\nimport L from 'leaflet';\nimport 'leaflet-routing-machine';\nimport \"leaflet-routing-machine/dist/leaflet-routing-machine.css\";\nimport { MapContainer, TileLayer, useMap, Marker, Popup } from 'react-leaflet';\n\n//styles\nimport '../styles/Map.css';\n\n//components\nimport Event from './Event';\n\n//custom marker icon\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar userIcon = L.icon({\n  iconUrl: require('../img/markers/marker-icon-red.png'),\n  shadowUrl: require('../img/markers/marker-shadow.png'),\n  iconSize: [25, 41],\n  iconAnchor: [12.5, 41],\n  popupAnchor: [1, -41],\n  shadowSize: [41, 41]\n});\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: {\n        lat: 41.9972,\n        lng: 21.4331\n      },\n      zoom: 16,\n      allowedLocation: false,\n      displayed: false\n    };\n    this.displayRoute = this.displayRoute.bind(this);\n    this.removeRoute = this.removeRoute.bind(this);\n  }\n\n  /*Called when the page is loaded, if the user denies access through their browser we get their location through their IP address using ipAPI\r\n    Update the state after the user is located*/\n  componentDidMount() {\n    navigator.geolocation.getCurrentPosition(position => {\n      this.setState({\n        location: {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        },\n        allowedLocation: true\n      });\n    }, () => {\n      console.log('ERROR: Location access denied! Fetching location based on IP address.');\n      fetch('https://ipapi.co/json').then(res => res.json()).then(location => {\n        this.setState({\n          location: {\n            lat: location.latitude,\n            lng: location.longitude\n          },\n          allowedLocation: true\n        });\n      });\n    });\n  }\n  displayRoute() {\n    this.setState({\n      displayed: true\n    });\n  }\n  removeRoute() {\n    this.setState({\n      displayed: false\n    });\n  }\n\n  //Map and marker rendering, flying animation when the user is located\n  render() {\n    var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n    const position = [this.state.location.lat, this.state.location.lng];\n    const FlyMapTo = () => {\n      _s();\n      const map = useMap();\n      useEffect(() => {\n        map.flyTo(position);\n      }, [position]);\n      return null;\n    };\n    _s(FlyMapTo, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n      return [useMap];\n    });\n    function RemoveRouteButton() {\n      _s2();\n      const map = useMap();\n      useEffect(() => {\n        if (!map) return;\n        var button = L.control({\n          position: \"botttomright\"\n        });\n        button.onAdd = function (map) {\n          this._div = L.DomUtil.create(\"div\", \"myControl\");\n          const buttonElement = `<div class=\"btnWrapper\">\n                <button class=\"btn btn-primary\">Button</button>\n                </div>`;\n          this._div.innerHTML = buttonElement;\n          return this._div;\n        };\n        button.addTo(map);\n        return () => map.remove(button);\n      }, [map]);\n      return null;\n    }\n    _s2(RemoveRouteButton, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n      return [useMap];\n    });\n    return /*#__PURE__*/_jsxDEV(MapContainer, {\n      className: \"map\",\n      center: position,\n      zoom: this.state.zoom,\n      scrollWheelZoom: true,\n      zoomControl: false,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), this.state.allowedLocation ? /*#__PURE__*/_jsxDEV(Marker, {\n        position: position,\n        icon: userIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Among Us.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(Event, {\n        userLocation: position,\n        eventLocation: [41.99556830573725, 21.411310806864552],\n        eventOrg: \"Rock bar \\\"Woodstock\\\"\",\n        eventTitle: \"Rock Party!\",\n        eventDescription: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.\",\n        eventStart: \"13.10.2022 @ 21:30\",\n        eventImage: \"../img/events/woodstock.jpg\",\n        displayRoute: this.displayRoute,\n        removeRoute: this.removeRoute,\n        value: this.state.displayed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Event, {\n        userLocation: position,\n        eventLocation: [41.986663126758536, 21.43136836559754],\n        eventOrg: \"Pub \\\"Beertija\\\"\",\n        eventTitle: \"Trivia Night!\",\n        eventDescription: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.\",\n        eventStart: \"14.10.2022 @ 22:30\",\n        eventImage: \"../img/events/woodstock.jpg\",\n        displayRoute: this.displayRoute,\n        removeRoute: this.removeRoute,\n        value: this.state.displayed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FlyMapTo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default Map;","map":{"version":3,"names":["React","Component","useEffect","L","MapContainer","TileLayer","useMap","Marker","Popup","Event","userIcon","icon","iconUrl","require","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","Map","constructor","props","state","location","lat","lng","zoom","allowedLocation","displayed","displayRoute","bind","removeRoute","componentDidMount","navigator","geolocation","getCurrentPosition","position","setState","coords","latitude","longitude","console","log","fetch","then","res","json","render","FlyMapTo","map","flyTo","RemoveRouteButton","button","control","onAdd","_div","DomUtil","create","buttonElement","innerHTML","addTo","remove"],"sources":["C:/Users/MacoT/OneDrive/Documents/GitHub/BeOurGuest-Homeworks/Homework 3/client/src/components/Map.jsx"],"sourcesContent":["import React, { Component, useEffect} from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet-routing-machine';\r\nimport \"leaflet-routing-machine/dist/leaflet-routing-machine.css\";\r\nimport { MapContainer, TileLayer, useMap, Marker, Popup } from 'react-leaflet'\r\n\r\n//styles\r\nimport '../styles/Map.css';\r\n\r\n//components\r\nimport Event from './Event';\r\n\r\n//custom marker icon\r\nvar userIcon = L.icon({\r\n    iconUrl:  require('../img/markers/marker-icon-red.png'),\r\n    shadowUrl: require('../img/markers/marker-shadow.png'),\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12.5, 41],\r\n    popupAnchor: [1, -41],\r\n    shadowSize: [41, 41]\r\n});\r\n\r\nclass Map extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            location: {\r\n                lat: 41.9972,\r\n                lng: 21.4331,\r\n            },\r\n            zoom: 16,\r\n            allowedLocation: false,\r\n            displayed: false\r\n        }\r\n        this.displayRoute = this.displayRoute.bind(this);\r\n        this.removeRoute = this.removeRoute.bind(this);\r\n    }\r\n\r\n    /*Called when the page is loaded, if the user denies access through their browser we get their location through their IP address using ipAPI\r\n      Update the state after the user is located*/\r\n    componentDidMount() {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n            this.setState({\r\n                location: {\r\n                    lat: position.coords.latitude,\r\n                    lng: position.coords.longitude\r\n                },\r\n                allowedLocation: true\r\n            });\r\n        }, () => {\r\n            console.log('ERROR: Location access denied! Fetching location based on IP address.');\r\n            fetch('https://ipapi.co/json')\r\n                .then(res => res.json())\r\n                .then(location => {\r\n                    this.setState({\r\n                        location: {\r\n                            lat: location.latitude,\r\n                            lng: location.longitude\r\n                        },\r\n                        allowedLocation: true\r\n                    });\r\n                });\r\n        });\r\n    }\r\n\r\n    displayRoute() {\r\n        this.setState({\r\n            displayed: true\r\n        });\r\n    }\r\n    removeRoute() {\r\n        this.setState({\r\n            displayed: false\r\n        });\r\n    } \r\n\r\n    //Map and marker rendering, flying animation when the user is located\r\n    render() {\r\n        const position = [this.state.location.lat, this.state.location.lng];\r\n        \r\n        const FlyMapTo = () => {\r\n            const map = useMap()\r\n        \r\n            useEffect(() => {\r\n                map.flyTo(position)\r\n            }, [position])\r\n\r\n            return null\r\n        }\r\n\r\n        function RemoveRouteButton() {\r\n            const map = useMap();\r\n          \r\n            useEffect(() => {\r\n              if (!map) return;\r\n          \r\n              var button = L.control({\r\n                position: \"botttomright\"\r\n              });\r\n          \r\n              button.onAdd = function (map) {\r\n                this._div = L.DomUtil.create(\"div\", \"myControl\");\r\n                const buttonElement = `<div class=\"btnWrapper\">\r\n                <button class=\"btn btn-primary\">Button</button>\r\n                </div>`;\r\n          \r\n                this._div.innerHTML = buttonElement;\r\n                return this._div;\r\n              };\r\n          \r\n              button.addTo(map);\r\n          \r\n              return () => map.remove(button);\r\n            }, [map]);\r\n          \r\n            return null;\r\n          }\r\n\r\n        return (\r\n            <MapContainer className='map' center={position} zoom={this.state.zoom} scrollWheelZoom={true} zoomControl={false}>\r\n                <TileLayer\r\n                    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                />\r\n                { this.state.allowedLocation ?\r\n                    <Marker position={position} icon={userIcon}>\r\n                        <Popup>\r\n                            Among Us.\r\n                        </Popup>\r\n                    </Marker> \r\n                    : \"\"\r\n                }\r\n                <Event \r\n                    userLocation={position} \r\n                    eventLocation={[41.99556830573725, 21.411310806864552]}\r\n                    eventOrg='Rock bar \"Woodstock\"'\r\n                    eventTitle=\"Rock Party!\"\r\n                    eventDescription=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.\"\r\n                    eventStart=\"13.10.2022 @ 21:30\"\r\n                    eventImage=\"../img/events/woodstock.jpg\"\r\n                    displayRoute={this.displayRoute}\r\n                    removeRoute={this.removeRoute}\r\n                    value={this.state.displayed}\r\n                />\r\n                <Event \r\n                    userLocation={position} \r\n                    eventLocation={[41.986663126758536, 21.43136836559754]}\r\n                    eventOrg='Pub \"Beertija\"'\r\n                    eventTitle=\"Trivia Night!\"\r\n                    eventDescription=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.\"\r\n                    eventStart=\"14.10.2022 @ 22:30\"\r\n                    eventImage=\"../img/events/woodstock.jpg\"\r\n                    displayRoute={this.displayRoute}\r\n                    removeRoute={this.removeRoute}\r\n                    value={this.state.displayed}\r\n                />\r\n                <FlyMapTo />\r\n            </MapContainer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Map"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}